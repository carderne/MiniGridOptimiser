<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Mini-Grid Explorer</title>

	<script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==" crossorigin=""></script>

	<link rel="stylesheet" type="text/css" href="static/style.css">	

<style>
        
    </style>

</head>


<body>
<!--	

<div id="map"></div>
-->

			<div class="innertube" id="map"></div>
	<nav id="nav">
	<div class="innertube">        
	<ul>
        <h3>Start here</h3>
        <form method = "POST">
		<select class="form-control" id="village" name="village" onchange="showVillage()">
            <option selected hidden>Choose a village</option>                        
        </select>
        </form> 

        <p id="choose-gen"></p>

        {% if show_gen_instruction == True%}
        <p>Click desired generator location.</p>
        {% endif %}
        {% if show_gen_instruction == False and show_params == True %}
        <p>Generator site chosen.</p>
        {% endif %} 

        {% if show_params == True%}
		<form method = "POST">
            <h3>Choose parameters</h3>
            <table>
            <tr><td>Min house size <small>(m<sup>2</sup>)</small></td><td><input type="text" name="minimum_area_m2" value="{{minimum_area_m2}}" size="5"></td></tr>
            <tr><td>Demand <small>(kWh/pp/mon)</small></td><td><input type="text" name="demand" value="{{demand}}" size="5"></td></tr>
            <tr><td>Tariff <small>($/kWh)</small></td><td><input type="text" name="tariff" value="{{tariff}}" size="5"></td></tr>
            <tr><td>Generator cost <small>($/kW)</small></td><td><input type="text" name="gen_cost" value="{{gen_cost}}" size="5"></td></tr>
            <tr><td>Wire cost <small>($/m)</small></td><td><input type="text" name="cost_wire" value="{{cost_wire}}" size="5"></td></tr>
            <tr><td>Connection cost <small>($/house)</small></td><td><input type="text" name="cost_connection" value="{{cost_connection}}" size="5"></td></tr>
            <tr><td>Annual Opex <small>(% of Capex)</small></td><td><input type="text" name="opex_ratio" value="{{opex_ratio}}" size="5"></td></tr>
            <tr><td>Project lifetime <small>(years)</small></td><td><input type="text" name="years" value="{{years}}" size="5"></td></tr>
            <tr><td>Discount rate <small>(%)</small></td><td><input type="text" name="discount_rate" value="{{discount_rate}}" size="5"></td></tr>
            <tr><td>Max wire length <small>(m)<small></td><td><input type="text" name="max_tot_length" value="{{max_tot_length}}" size="5"></td></tr>
            </table>
            <input type="submit" name='run' value="Run (and be patient)">
		</form>
        {% endif %}

        {% if show_results == True%}
        <h3>Check your results</h3>
        <ul>
        <li>Houses connected: {{connected}}</li>    
        <li>Generator size: {{gen_size}} kW</li>                
        <li>Total length of wires: {{length}} m</li>
        <li>Capex: ${{capex}}</li>
        <li>Annual Opex: ${{opex}}</li>
        <li>Annual income: ${{income}}</li>
        <li>NPV: ${{npv}} </li>
        <br>
        {% if zipped%}
        <li><a href="{{zipped}}" download>Download shapefiles</a></li>
        {% endif %}
        </ul>
        {% endif %}

    </ul>
	</div>
	</nav>



	<script type="text/javascript" src="static/mgo.js"></script>
</body>
</html>
